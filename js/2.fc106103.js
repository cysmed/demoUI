(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"68ac":function(e,t,n){},ae0a:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR lff"}},[n("q-header",{attrs:{elevated:""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),n("q-toolbar-title",[e._v(" "+e._s(e.projectName)+" ")]),e.profileCompleted?e._e():n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"incomplete_circle",color:"red","aria-label":"Menu"},on:{click:e.profile}}),n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:e.approved?"verified":"unpublished"}},[n("q-tooltip",[e._v("\n            Account has "+e._s(e.approved?"":"not")+" been verified\n          ")])],1),e.enableFullScreen?n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:e.fullscreenIcon,"aria-label":"Menu"},on:{click:e.fullscreen}}):e._e(),n("span",[e._v(" "+e._s(e.userName)),n("br"),e._v(e._s(e.authority.replace(/LOCAL_ADMIN_/,"ADMIN ").replace(/LOCAL_USER_/,"USER").replace(/_/," "))+" ")]),n("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"more_vert","aria-label":"Profile"},on:{click:function(t){e.displaySettingsMenu=!e.displaySettingsMenu}}},[n("q-menu",{attrs:{"content-style":{backgroundColor:"#fff",color:"#737373"}}},[n("q-list",{staticStyle:{"min-width":"100px"}},[n("q-item",{attrs:{clickable:""},on:{click:e.profile}},[n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{color:"primary",name:"person"}})],1),n("q-item-section",[e._v("Profile")])],1),n("q-item",{attrs:{clickable:""},on:{click:e.auditLogs}},[n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{color:"primary",name:"track_changes"}})],1),n("q-item-section",[e._v("Audit Logs")])],1),n("q-item",{attrs:{clickable:""},on:{click:e.logout}},[n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{color:"primary",name:"logout"}})],1),n("q-item-section",[e._v("Logout")])],1)],1)],1)],1)],1),e.cysmed.loading?n("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e()],1),n("q-drawer",{staticClass:"bg-primary",attrs:{bordered:"",breakpoint:1024,"content-class":"bg-primary"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[n("q-list",e._l(e.essentialLinks,(function(t){return n("EssentialLink",e._b({key:t.title},"EssentialLink",t,!1))})),1)],1),n("q-page-container",[e.loaded?n("router-view",{attrs:{cysmed:e.cysmed}}):e._e()],1)],1)},a=[],l=(n("ddb0"),n("e01a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-item",{attrs:{clickable:"",tag:"a",href:e.link}},[e.icon?n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{name:e.icon}})],1):e._e(),n("q-item-section",[n("q-item-label",[e._v(e._s(e.title))]),n("q-item-label",{attrs:{caption:""}},[e._v("\n      "+e._s(e.caption)+"\n    ")])],1)],1)}),s=[],o={name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}},r=o,c=n("2877"),u=n("66e5"),d=n("4074"),p=n("0016"),m=n("0170"),f=n("eebe"),h=n.n(f),b=Object(c["a"])(r,l,s,!1,null,null,null),q=b.exports;h()(b,"components",{QItem:u["a"],QItemSection:d["a"],QIcon:p["a"],QItemLabel:m["a"]});const g=[],_=(n("0924").default,n("c2a1").default),y=n("20e6"),w=n("1712").to,v=n("0470").default;var L={name:"MainLayout",components:{EssentialLink:q},data(){return{loaded:!1,cysmed:v,fullscreenIcon:"fullscreen",enableFullScreen:!1,leftDrawerOpen:!1,displaySettingsMenu:!1,myAuditLogs:"auditLogs",essentialLinks:g,userName:"",authority:"",projectName:y.LOGO_NAME,profileCompleted:null,approved:null}},async created(){let e=[{title:"Home",caption:"Home",icon:"home",link:window.location.protocol+"//"+window.location.host+"/#/home"}];this.$q.platform.is.electron||(this.enableFullScreen=!0),this.setFullScreenIcon(),_.setSettings({TBURL:y["TB_URL"]}),_.setVue(this),_.showLoading();let[t,n]=await w(_.readUserData());n&&(this.essentialLinks=e.concat(_.getUIElements(n)).map((e=>(e.title=e.name||e.title,e.caption=e.caption||e.description,e)))),_.hideLoading(),this.userData=n,this.setUserName()},methods:{async setUserName(){let e=await _.whoAmILocally();this.userName=`${e.firstName} ${e.lastName||""}`,this.authority=`${e.currentAuthority||e.authority}`,void 0===e.completed&&(await _.whoAmI(),e=await _.whoAmILocally()),this.profileCompleted=e.completed,this.approved=e.approved,this.cysmed.currentUserAuthority=this.authority,this.loaded=!0},logout(){window.location.assign("/#/logout")},profile(){window.location.assign("/#/profile")},auditLogs(){window.location.assign("/#/system/audit_logs/"+this.userData.userId+"/logins")},fullscreen(){this.$q.fullscreen.isActive?this.$q.fullscreen.exit().then((()=>{})):this.$q.fullscreen.request().then((()=>{}))},setFullScreenIcon(){this.enableFullScreen&&(this.enableFullScreen=!1,setTimeout((()=>{this.isFullScreen=this.$q.fullscreen.isActive,this.isFullScreen?this.fullscreenIcon="fullscreen_exit":this.fullscreenIcon="fullscreen",this.enableFullScreen=!0}),100))}},watch:{"$q.fullscreen.isActive"(e){this.isFullScreen=this.$q.fullscreen.isActive,this.isFullScreen?this.fullscreenIcon="fullscreen_exit":this.fullscreenIcon="fullscreen"},$route(e,t){this.setUserName()}}},k=L,S=(n("fdfec"),n("4d5a")),I=n("e359"),Q=n("65c6"),A=n("9c40"),N=n("6ac5"),$=n("05c0"),D=n("4e73"),F=n("1c1c"),O=n("6b1d"),M=n("9404"),E=n("09e3"),U=Object(c["a"])(k,i,a,!1,null,null,null);t["default"]=U.exports;h()(U,"components",{QLayout:S["a"],QHeader:I["a"],QToolbar:Q["a"],QBtn:A["a"],QToolbarTitle:N["a"],QTooltip:$["a"],QMenu:D["a"],QList:F["a"],QItem:u["a"],QItemSection:d["a"],QIcon:p["a"],QLinearProgress:O["a"],QDrawer:M["a"],QItemLabel:m["a"],QPageContainer:E["a"]})},fdfec:function(e,t,n){"use strict";n("68ac")}}]);