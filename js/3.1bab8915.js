(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{3120:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{staticClass:"padding bg-grey-1"},[e.loadingSomethingBigger?t("q-linear-progress",{attrs:{indeterminate:"",color:"negative"}}):e._e(),e.rightSideBar?t("rightSideBar",{attrs:{main:e.main,objType:"user"}}):e._e(),t("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:e.createUserDialog,callback:function(s){e.createUserDialog=s},expression:"createUserDialog"}},[t("q-card",{staticClass:"q-ma-md"},[t("q-card-section",{staticClass:"bg-secondary text-white text-center"},[t("div",{staticClass:"text-h6"},[e._v("CysmedHub")])]),t("q-card-section",{staticClass:"bg-secondary text-white"},[t("registrationForm",{attrs:{inside:"true"}})],1)],1)],1),t("breadcrumbs",{attrs:{links:e.links}}),t("div",{staticClass:"row q-gutter-lg q-ma-none q-pa-none"},[t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"ALL USERS","background-color":"users"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"person",total:e.numUsers,link:"/#/system/users"}}),t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"SYS_ADMIN","background-color":"sys_admin"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"settings",total:e.numSysAdmins,link:"/#/system/users/sys_admin"}}),t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"ACTIVE","background-color":"active"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"do_not_disturb_off",total:e.numActiveUsers,link:"/#/system/users/active"}}),t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"INACTIVE","background-color":"inactive"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"do_not_disturb_on",total:e.numInactiveUsers,link:"/#/system/users/inactive"}}),t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"ENABLED","background-color":"enabled"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"people",total:e.numEnabledUsers,link:"/#/system/users/enabled"}}),t("cardTotal",{staticClass:"col-12 col-lg-2 col-md-3 col-sm-12 bg-transparent q-ma-none",attrs:{title:"DISABLED","background-color":"disabled"===e.activeElement_?"bg-secondary":"bg-primary","icon-name":"person_off",total:e.numDisabledusers,link:"/#/system/users/disabled"}})],1),t("q-table",{staticClass:"col",attrs:{title:"Users",dense:"",data:e.allUsers,columns:e.columns,filter:e.filter,"row-key":"index"},on:{"row-click":e.selectUser},scopedSlots:e._u([{key:"top-right",fn:function(){return[t("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.filter,callback:function(s){e.filter=s},expression:"filter"}},[t("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),t("q-btn",{attrs:{flat:""}},[t("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(s){return e.listUsers()}}})],1),t("q-btn",{attrs:{flat:""}},[t("q-icon",{attrs:{color:"primary",name:"add_circle",side:""},on:{click:function(s){e.createUserDialog=!0}}})],1)]},proxy:!0}])})],1)},i=[],n=(t("ddb0"),t("5319"),t("cf57"),t("310f")),l=t("2cbd"),r=t("46c6"),o=t("5757"),c=t("4d6d");const d=t("20e6"),m=t("40cd").default,g=t("1712").to;var b={name:"PageIndex",components:{loginForm:n["a"],breadcrumbs:l["a"],cardTotal:r["a"],registrationForm:o["a"],rightSideBar:c["a"]},watch:{$route(e,s){this.setfilters(e.path)}},data(){return{activeElement_:"",main:this,editted:!1,loadingSomething:!1,loadingSomethingBigger:!1,rightSideBar:!1,createUserDialog:!1,loaded:!0,links:[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"}],checkedLoggedIn:!1,loggedIn:!1,listHck:[{name:"Users",icon:"settings",link:"/#/system/users",Authority:"Manage Users and Organizations",description:"Manage Users and Organizations"}],filter:"",columnsHck:[],columns:[{name:"firstName",label:"First Name",field:"firstName",sortable:!0},{name:"lastName",label:"Last Name",field:"lastName",sortable:!0},{name:"email",label:"Email",field:"email",sortable:!0}],numUsers:0,numSysAdmins:0,numActiveUsers:0,numInactiveUsers:0,numEnabledUsers:0,numDisabledusers:0,allUsers:[],selectedRow:{}}},async created(){this.setfilters(),m.setVue(this),m.setSettings({TBURL:d["TB_URL"]}),m.showLoading();let[e,s]=await g(m.isLoggedIn());m.hideLoading(),this.checkedLoggedIn=!0,!e&&s||window.location.assign("#/"),await this.listUsers()},methods:{setfilters(e=!1){let s=(e||window.location.hash).replace(/[\/]*[#]*\//,"");switch(s){case"system/users":this.filters={},this.activeElement_="users",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"}];break;case"system/users/sys_admin":this.filters={authority:"SYS_ADMIN"},this.activeElement_="sys_admin",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Sys_Admins",icon:"settings",to:"/system/users/sys_admin"}];break;case"system/users/active":this.filters={isActive:!0},this.activeElement_="active",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Active",icon:"do_not_disturb_off",to:"/system/users/active"}];break;case"system/users/inactive":this.filters={isActive:!1},this.activeElement_="inactive",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Inactive",icon:"do_not_disturb_on",to:"/system/users/inactive"}];break;case"system/users/enabled":this.filters={enabled:!0},this.activeElement_="enabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Enabled",icon:"people",to:"/system/users/enabled"}];break;case"system/users/disabled":this.filters={enabled:!1},this.activeElement_="disabled",this.links=[{label:"Settings",icon:"settings",to:"/system"},{label:"Users",icon:"people",to:"/system/users"},{label:"Disabled",icon:"person_off",to:"/system/users/disabled"}];break}this.listUsers()},async listUsers(){this.loadingSomethingBigger=!0;let[e,s]=await g(m.listAllUsers(this.filters));this.loadingSomethingBigger=!1,this.allUsers=s||[],this.numUsers=this.allUsers.length,this.numSysAdmins=this.allUsers.filter((e=>"SYS_ADMIN"===e.authority)).length,this.numActiveUsers=this.allUsers.filter((e=>!0===e.isActive)).length,this.numInactiveUsers=this.allUsers.filter((e=>!1===e.isActive)).length,this.numEnabledUsers=this.allUsers.filter((e=>!0===e.enabled)).length,this.numDisabledusers=this.allUsers.filter((e=>!1===e.enabled)).length},selectApplication(e){window.location.assign(e)},gotoPage(e){console.log(e),window.location.assign(e)},selectUser(e,s){this.selectedUser=!0,this.selectedEmail=s.email,this.selectedId="object"===typeof s.id?s.id.id:s.id,this.selectedFirstName=s.firstName,this.selectedLastName=s.lastName,this.selectedRow=s,this.rightSideBar=!1,this.$nextTick((()=>this.rightSideBar=!0))}},computed:{activeElement(){return this.activeElement_},cardContainerClass(){if(this.$q.screen.gt.xs)return"grid-masonry grid-masonry--"+(this.$q.screen.gt.sm?"6":"4")}}},u=b,h=t("2877"),y=t("9989"),p=t("6b1d"),f=t("24e8"),U=t("f09f"),v=t("a370"),_=t("eaac"),k=t("27f9"),S=t("0016"),E=t("9c40"),w=t("bd08"),q=t("db86"),A=t("42a1"),C=t("eebe"),I=t.n(C),D=Object(h["a"])(u,a,i,!1,null,null,null);s["default"]=D.exports;I()(D,"components",{QPage:y["a"],QLinearProgress:p["a"],QDialog:f["a"],QCard:U["a"],QCardSection:v["a"],QTable:_["a"],QInput:k["a"],QIcon:S["a"],QBtn:E["a"],QTr:w["a"],QTd:q["a"],QPopupEdit:A["a"]})}}]);