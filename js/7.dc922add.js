(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{ecc7:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=this,i=t.$createElement,n=t._self._c||i;return t.authority.match(/LOCAL_/)?n("div",[n("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:t.createLocalUser,reset:t.onReset}},[n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.FIRST"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("Please Enter First Name")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.LAST"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("Please Enter Last Name")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),n("q-input",{attrs:{filled:"",type:"email",label:t.translate("FIELDS.EMAIL"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("Please Enter Email Address")},function(i){return e.isValidEmail()||t.translate("Please Enter a valid Email Address")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("q-input",{attrs:{filled:"",type:"password",label:t.translate("FIELDS.PASSWORD"),"lazy-rules":"",rules:[function(e){return null!==e&&""!==e||t.translate("Please enter password.")}],"error-message":t.passwordErrorMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("q-input",{attrs:{filled:"",type:"password",label:t.translate("FIELDS.CONFIRMPASSWORD"),"lazy-rules":"",rules:[function(e){return null!==e&&""!==e||t.translate("Please confirm password")}],"error-message":t.passwordErrorMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.cpassword,callback:function(e){t.cpassword=e},expression:"cpassword"}}),n("q-separator",{attrs:{color:"white",size:"2px"}}),n("div",[n("q-btn",{attrs:{label:t.translate("ACTIONS.SUBMIT"),type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.translate("ACTIONS.RESET"),type:"reset",color:"white",flat:""}})],1)],1)],1):n("div",[n("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:t.createUser,reset:t.onReset}},[n("q-select",{attrs:{disable:t.inside,filled:"",options:t.entityTypes,label:t.translate("PASSAGE.REGISTERAS"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.ENTITYTYPE.MISSING")}]},model:{value:t.entityType,callback:function(e){t.entityType=e},expression:"entityType"}}),t.isIndividual?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.FIRST"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.NAME.ANY.MISSING")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}):t._e(),t.isIndividual?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.LAST"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.NAME.ANY.MISSING")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}):t._e(),t.isIndividual?n("q-select",{attrs:{filled:"",options:t.genders,label:t.translate("FIELDS.GENDER"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.GENDER.MISSING")}]},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}}):t._e(),t.isIndividual?n("q-input",{attrs:{filled:"",mask:"date",label:t.translate("FIELDS.DOB"),rules:["date",function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.DOB.MISSING")}]},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}},[n("div",{staticClass:"row items-center justify-end"},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,4195295664),model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.FACILITY"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.NAME.FACILITY.MISSING")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.REGISTRATIONNUMBER"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.REGISTRATIONNUMBERFACILITY.MISSINGOWN")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.facilityRegistrationNumber,callback:function(e){t.facilityRegistrationNumber=e},expression:"facilityRegistrationNumber"}}):t._e(),t.isFacility?t._e():n("q-input",{attrs:{filled:"",type:"email",label:t.translate("FIELDS.EMAIL"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.EMAIL.MISSINGOWN")},function(i){return e.isValidEmail()||t.translate("FIELDS.ERRORS.EMAIL.INVALID")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t.isFacility?n("q-input",{attrs:{filled:"",type:"email",label:t.translate("FIELDS.EMAIL"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.EMAIL.MISSINGFACILITY")},function(i){return e.isValidEmail()||t.translate("FIELDS.ERRORS.EMAIL.INVALID")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}):t._e(),t.isPharmacist?n("q-select",{attrs:{filled:"",options:t.qualifications.Pharmacists,label:t.translate("FIELDS.PROFESSIONAL.QUALIFICATION"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.QUALIFICATION.MISSING")}]},model:{value:t.qualification,callback:function(e){t.qualification=e},expression:"qualification"}}):t._e(),t.isPharmacist?n("q-select",{attrs:{filled:"",options:t.registeringBodies.Pharmacists,label:t.translate("PASSAGE.REGISTERINGBODY"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.REGISTERINGBODY.MISSING")}]},model:{value:t.registeringBody,callback:function(e){t.registeringBody=e},expression:"registeringBody"}}):t._e(),t.isPharmacist?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.REGISTRATIONNUMBER"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.REGISTRATIONNUMBER.MISSINGOWN")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.registrationNumber,callback:function(e){t.registrationNumber=e},expression:"registrationNumber"}}):t._e(),t.entiTyisSelected&&!t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.1"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.1.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.1.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.telephone1,callback:function(e){t.telephone1=e},expression:"telephone1"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.1"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.FACILITY.1.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.1.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.telephone1,callback:function(e){t.telephone1=e},expression:"telephone1"}}):t._e(),t.entiTyisSelected&&!t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.2"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.2.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.2.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.telephone2,callback:function(e){t.telephone2=e},expression:"telephone2"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.2"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.FACILITY.2.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.2.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.telephone2,callback:function(e){t.telephone2=e},expression:"telephone2"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.LOCATION"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.LOCATION.MISSING")},,]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-btn",{attrs:{icon:"place"},on:{click:function(e){t.mapDialog=!0}}})]},proxy:!0}],null,!1,495012479),model:{value:t.centerString,callback:function(e){t.centerString=e},expression:"centerString"}}):t._e(),t.isFacility?n("q-separator",{attrs:{color:"white",size:"2px"}}):t._e(),t.isFacility?n("div",{staticClass:"text-white"},[t._v("\n      "+t._s(t.translate("PASSAGE.SUPERINTENDENT"))+"\n    ")]):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.NAME.SUPERINTENDENT"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.NAME.SUPERINTENDENT.MISSING")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.superintendentFullName,callback:function(e){t.superintendentFullName=e},expression:"superintendentFullName"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.IDNUMBER.SUPERINTENDENT"),"lazy-rules":"",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.IDNUMBER.SUPERINTENDENT.MISSING")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.superintendentIdentityNumber,callback:function(e){t.superintendentIdentityNumber=e},expression:"superintendentIdentityNumber"}}):t._e(),t.isFacility?n("q-select",{attrs:{filled:"",options:t.qualifications.Pharmacists,label:t.translate("FIELDS.PROFESSIONAL.SUPERINTENDENT.QUALIFICATION"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.QUALIFICATION.SUPERINTENDENT.MISSING")}]},model:{value:t.qualification,callback:function(e){t.qualification=e},expression:"qualification"}}):t._e(),t.isFacility?n("q-select",{attrs:{filled:"",options:t.registeringBodies.Pharmacists,label:t.translate("PASSAGE.REGISTERINGBODY"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.REGISTERINGBODY.MISSING")}]},model:{value:t.registeringBody,callback:function(e){t.registeringBody=e},expression:"registeringBody"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",type:"text",label:t.translate("FIELDS.SUPERINTENDENT.REGISTRATIONNUMBER"),rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.REGISTRATIONNUMBER.SUPERINTENDENT.MISSINGOWN")}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.registrationNumber,callback:function(e){t.registrationNumber=e},expression:"registrationNumber"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.SUPERINTENDENT.1"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.SUPERINTENDENT.1.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.SUPERINTENDENT.1.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.superintendentTelephone1,callback:function(e){t.superintendentTelephone1=e},expression:"superintendentTelephone1"}}):t._e(),t.isFacility?n("q-input",{attrs:{filled:"",label:t.translate("FIELDS.TELEPHONE.SUPERINTENDENT.2"),type:"text",rules:[function(e){return e&&e.length>0||t.translate("FIELDS.ERRORS.TELEPHONE.SUPERINTENDENT.2.MISSING")},function(e){return e&&t.cysmed.isTelephone(e)||t.translate("FIELDS.ERRORS.TELEPHONE.SUPERINTENDENT.2.INVALID")}]},on:{input:t.cysmed.changeSomethingInProfessional},model:{value:t.superintendentTelephone2,callback:function(e){t.superintendentTelephone2=e},expression:"superintendentTelephone2"}}):t._e(),n("q-separator",{attrs:{color:"white",size:"2px"}}),t.showAccept?n("terms",{attrs:{accept:t.accept,main:t.mainLocal}}):t._e(),t.showActivation?n("div",{staticClass:"col"},[n("q-checkbox",{staticClass:"col",attrs:{label:"Send Activation Email"},model:{value:t.activationEmail,callback:function(e){t.activationEmail=e},expression:"activationEmail"}}),n("q-checkbox",{staticClass:"col",attrs:{label:"Show Activation link"},model:{value:t.showActivationLink,callback:function(e){t.showActivationLink=e},expression:"showActivationLink"}})],1):t._e(),n("div",[n("q-btn",{attrs:{label:t.translate("ACTIONS.SUBMIT"),type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.translate("ACTIONS.RESET"),type:"reset",color:"white",flat:""}})],1),n("activationLink",{attrs:{alert:t.alert,alertUserId:t.alertUserId,main:t.main}})],1),n("q-dialog",{attrs:{maximized:!1,"transition-show":"scale","transition-hide":"scale"},model:{value:t.mapDialog,callback:function(e){t.mapDialog=e},expression:"mapDialog"}},[n("div",{staticStyle:{width:"100%",height:"100%"}},[n("l-map",{ref:"lmap",staticClass:"full-width",staticStyle:{width:"100%",height:"100%"},attrs:{zoom:t.zoom,center:t.center},on:{ready:t.lmapReady}},[n("l-tile-layer",{attrs:{url:t.url}}),n("l-marker",{ref:"marker",attrs:{"lat-lng":t.center,draggable:!0}},[n("l-popup",{staticClass:"q-pa-none q-ma-none"},[n("q-card",{staticClass:"q-pa-none q-ma-none",attrs:{flat:""}},[n("q-card-section",[t._v("\n                "+t._s(t.firstName||"Facility")+" Location\n              ")]),n("q-card-section",[t._v("\n                "+t._s(t.centerString)+"\n              ")])],1)],1)],1)],1)],1)])],1)},a=[],s=(i("ddb0"),i("15ce")),l=i("7c83"),r=i("cf57"),o=i("e11e"),c=i.n(o),u=i("2699"),p=i("a40a"),E=i("4e2b6"),d=i("fbba"),y=i("f60f");i("6cc5");i("bc3a");const h=i("1712").to,S=i("20e6"),m=i("c2a1").default,I=i("ea76").default;delete c.a.Icon.Default.prototype._getIconUrl,c.a.Icon.Default.mergeOptions({iconRetinaUrl:i("584d"),iconUrl:i("6397"),shadowUrl:i("e2b9")});var f={computed:{isIndividual(){return"PATIENT"===this.selectedEntityTypeOriginal||"PHARMACIST"===this.selectedEntityTypeOriginal||"SYS_ADMIN"===this.selectedEntityTypeOriginal},isPharmacist(){return"PHARMACIST"===this.selectedEntityTypeOriginal},isPatient(){return"PATIENT"===this.selectedEntityTypeOriginal||""===this.selectedEntityTypeOriginal||"SYS_ADMIN"===this.selectedEntityTypeOriginal},isFacility(){return"PATIENT"!==this.selectedEntityTypeOriginal&&""!==this.selectedEntityTypeOriginal&&"PHARMACIST"!==this.selectedEntityTypeOriginal&&"SYS_ADMIN"!==this.selectedEntityTypeOriginal},entiTyisSelected(){return""!==this.selectedEntityTypeOriginal}},name:"registrationForm",components:{terms:s["a"],activationLink:l["a"],LMap:u["a"],LTileLayer:p["a"],LMarker:E["a"],LIcon:d["a"],LPopup:y["a"]},props:["inside","main","cysmed"],async created(){this.inside&&(this.authority=(await m.whoAmILocally()).authority,this.email="asd@asd.com",this.firstName="asd@asd.com",this.lastName="asd@asd.com",this.password="asd@asd.com",this.cpassword="asd@asd.com",this.entityTypesOriginal=["SYS_ADMIN"],this.entityType=this.translate("FIELDS.ENTITYTYPES.SYS_ADMIN"),this.updateSelectedEntityType(this.entityType)),this.entityTypes=this.entityTypesOriginal.map((e=>this.translate(`FIELDS.ENTITYTYPES.${e}`))),this.genders=this.gendersOriginal.map((e=>this.translate(`FIELDS.GENDERS.${e}`))),this.centerString=this.center.join(",");let e=this.gendersOriginal.indexOf(this.gender);this.gender=this.genders[e],m.setSettings({TBURL:S["TB_URL"]}),m.setSettings(S),this.inside&&(this.showAccept=!1,this.accept=!0,this.showActivation=!0,this.activationEmail=!1,this.showActivationLink=!0)},data(){return{authority:"",superintendentFullName:"",superintendentIdentityNumber:"",superintendentTelephone1:"",superintendentTelephone2:"",facilityRegistrationNumber:"",mapDialog:!1,location:"0,0",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:15,center:[-1.286389,36.817223],centerString:"",icon:c.a.icon({iconUrl:"/images/marker-icon.png",iconSize:[32,37],iconAnchor:[16,37]}),staticAnchor:[16,37],customText:"Foobar",iconSize:64,registrationNumber:"",qualification:"",qualifications:{Pharmacists:["Pharmacist","Pharmtech"]},registeringBody:"",registeringBodies:{Pharmacists:["Pharmacy and Poisons Board"]},telephone1:"",telephone2:"",selectedEntityTypeOriginal:"",entityType:"",entityTypesOriginal:["PATIENT","PHARMACIST","DISTRIBUTOR_PHARMACY","WHOLESALE_PHARMACY","RETAIL_PHARMACY"],entityTypes:[],translate:I.translate,activationPage:"",accept:!1,showAccept:!0,showActivation:!1,showActivationLink:!1,activationEmail:!0,email:"",firstName:"",lastName:"",gender:"Male",gendersOriginal:["Male","Female"],genders:[],dob:"",password:"",cpassword:"",passwordErrorMessage:"",users:[],alert:!1,alertUserId:null}},methods:{async createLocalUser(){if(this.password!==this.cpassword)return this.cpassword="",this.passwordErrorMessage=this.translate("FIELDS.ERRORS.PASSWORD.DONTMATCH"),this.$q.notify({type:"negative",message:this.translate("FIELDS.ERRORS.PASSWORD.DONTMATCH")}),!1;let e={};e.email=this.email,e.firstName=this.firstName,e.lastName=this.lastName,e.password=this.password,e.authority="LOCAL_USER",this.cysmed.setVue(this),this.cysmed.getPlatform();let[t,i]=await h(this.cysmed.createLocalUser(e));if(t){t=t.msg||t.message||t.error||t;try{t=JSON.parse(t)}catch(n){}if("object"===typeof t){let e=Object.keys(t);t=t[e[0]]}return this.$q.notify({type:"negative",message:this.translate(t)||t}),!1}this.$q.notify({type:"positive",message:this.translate("Successful user creation")});try{this.main.listUsers(),this.main.createUserDialog=!1}catch(n){}},lmapReady(e){this.map=e,this.$refs.marker.mapObject.on("dragend",(e=>{let t=e.target._latlng;t=[t.lat,t.lng],this.center=t}))},changeAccept(e){this.accept=e},submit(){this.$refs.userRegistrationForm.submit()},mainLocal(){return this},isValidEmail(){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(this.email)||this.translate("FIELDS.ERRORS.EMAIL.INVALID")},showCustom(e=""){const t=this.$q.dialog({title:e,message:"",progress:{spinner:r["a"],color:"primary"},persistent:!0,ok:!1}),i=setInterval((()=>{!1===this.working&&(clearInterval(i),t.hide())}),500)},async createUser(){return m.setSettings({TBURL:S["TB_URL"]}),new Promise((async(e,t)=>{if(!0!==this.accept)return this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:this.translate("PASSAGE.READACCEPTTERMS")}),e(!1);let i={};i.email=this.email,i.firstName=this.firstName,i.telephone1=this.telephone1,i.telephone2=this.telephone2;let n="";switch(console.log(this.selectedEntityTypeOriginal),i.authority=this.selectedEntityTypeOriginal,this.selectedEntityTypeOriginal){case"SYS_ADMIN":i.authority="SYS_ADMIN";case"PATIENT":case"PHARMACIST":case"SYS_ADMIN":let e=this.genders.indexOf(this.gender),t=this.gendersOriginal[e];i.lastName=this.lastName,i.gender=t,i.dateOfBirth=this.dob;case"PATIENT":if("PATIENT"===this.selectedEntityTypeOriginal){n="user";break}case"SYS_ADMIN":if("SYS_ADMIN"===this.selectedEntityTypeOriginal){n="user";break}case"PHARMACIST":i.qualification=this.qualification,i.registeringBody=this.registeringBody,i.registrationNumber=this.registrationNumber,console.log("PHARM PATH"),n="user/pharmacist";break;case"DISTRIBUTOR_PHARMACY":case"WHOLESALE_PHARMACY":case"RETAIL_PHARMACY":n="user/facility",i.lastName="",i.registrationNumber=this.registrationNumber,i.location=this.center,i.superintendentFullName=this.superintendentFullName,i.superintendentIdentityNumber=this.superintendentIdentityNumber,i.qualification=this.qualification,i.registeringBody=this.registeringBody,i.superintendentTelephone1=this.superintendentTelephone1,i.superintendentTelephone2=this.superintendentTelephone2,i.facilityRegistrationNumber=this.facilityRegistrationNumber;break;default:}console.log(n),console.log(n),console.log(n),console.log(n),this.working=!0,this.showCustom();let[a,s]=await h(m.createUser(i,{activationEmail:this.activationEmail,showActivationLink:this.showActivationLink},n));if(this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(l){}if("object"===typeof a){let e=Object.keys(a);a=a[e[0]]}this.$q.notify({type:"negative",message:this.translate(a)||a}),e(!1)}else{this.showActivationLink?(this.alertUserId=s,this.alert=!1,this.$nextTick((()=>this.alert=!0))):this.$q.notify({type:"positive",message:this.translate(`SUCCESS.REGISTRATION.${this.cysmed.platform}`)});try{this.main.listUsers()}catch(l){}}}))},onReset(){this.email=null,this.firstName=null,this.lastName=null,this.password=null,this.cpassword=null,this.accept=!1},updateSelectedEntityType(e){let t=this.entityTypes.indexOf(e),i=this.entityTypesOriginal[t];this.selectedEntityTypeOriginal=i}},watch:{entityType(e){this.updateSelectedEntityType(e)},center:{handler(e){this.centerString=this.center.join(",")},deep:!0}}},N=f,R=i("2877"),g=i("0378"),T=i("ddd8"),b=i("27f9"),A=i("0016"),L=i("7cbe"),O=i("52ee"),k=i("9c40"),D=i("eb85"),F=i("8f8e"),P=i("24e8"),x=i("f09f"),v=i("a370"),M=i("7f67"),q=i("eebe"),_=i.n(q),w=Object(R["a"])(N,n,a,!1,null,null,null);t["default"]=w.exports;_()(w,"components",{QForm:g["a"],QSelect:T["a"],QInput:b["a"],QIcon:A["a"],QPopupProxy:L["a"],QDate:O["a"],QBtn:k["a"],QSeparator:D["a"],QCheckbox:F["a"],QDialog:P["a"],QCard:x["a"],QCardSection:v["a"]}),_()(w,"directives",{ClosePopup:M["a"]})}}]);