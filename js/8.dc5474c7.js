(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0d03":function(t,e,s){"use strict";s("2e5c")},"2e5c":function(t,e,s){},"310d":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-tabs",{staticClass:"text-black bg-secondary",attrs:{align:"left"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.tabs,(function(t){return s("q-tab",{key:t,attrs:{name:t,label:t}})})),1),s("q-tab-panels",{staticClass:"q-ma-none q-pa-none bg-transparent",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"Current Subscriptions"}},[s("currentSubscriptions",{attrs:{cysmed:t.cysmed}})],1),s("q-tab-panel",{attrs:{name:"Monthly Subscriptions"}},[s("monthlySubscriptions",{attrs:{cysmed:t.cysmed}})],1),s("q-tab-panel",{attrs:{name:"Free Trials"}},[s("freeTrials",{attrs:{cysmed:t.cysmed}})],1)],1)],1)},a=[],r=s("2cbd"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-transparent"},[s("q-table",{staticClass:"col bg-transparent",attrs:{title:"Monthly Subscriptions",dense:"",data:t.monthlySubscriptions,columns:t.columns,filter:t.filter,"row-key":"index",flat:""},scopedSlots:t._u([{key:"top",fn:function(){return[s("div",{staticClass:"col-12"},[s("q-btn-toggle",{attrs:{flat:"","toggle-color":"primary",options:[{label:"Active",value:"active"},{label:"All",value:"all"}]},model:{value:t.selectedSubscriptionRange,callback:function(e){t.selectedSubscriptionRange=e},expression:"selectedSubscriptionRange"}}),s("q-btn",{attrs:{flat:""}},[s("q-icon",{attrs:{color:"primary",name:"add_circle",side:""},on:{click:function(e){t.addFreeTrialDialog=!t.addFreeTrialDialog}}})],1),s("q-btn",{attrs:{flat:""}},[s("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(e){return t.getFreeTrials()}}})],1)],1),s("br"),t.addFreeTrialDialog?s("div",{staticClass:"col-12"},[s("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:t.addFreeTrial,reset:t.onReset}},[s("q-select",{attrs:{options:t.subscriptionTypes,label:"Subscriber","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select Subscriber"}]},model:{value:t.subscriptionType,callback:function(e){t.subscriptionType=e},expression:"subscriptionType"}}),s("q-input",{attrs:{type:"number",label:"Months",rules:[function(t){return t&&t.length>0||"Please add months for the free trial."}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addFreeTrial(e)}},model:{value:t.months,callback:function(e){t.months=e},expression:"months"}}),s("div",[s("q-btn",{attrs:{label:t.translate("ACTIONS.SUBMIT"),type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.translate("ACTIONS.RESET"),type:"reset",color:"primary",flat:""}})],1)],1)],1):t._e()]},proxy:!0}])})],1)},l=[];s("ddb0");const{to:o}=s("1712"),c=s("ea76").default;var u={name:"freeTrials",props:["cysmed"],watch:{selectedSubscriptionRange(t){this.setTypeFilter(t),this.getFreeTrials()}},data(){return{typeFilter:!1,selectedSubscriptionRange:"active",translate:c.translate,addFreeTrialDialog:!1,subscriptionType:"",subscriptionTypes:["Distributor","Wholesaler","Retailer"],months:0,monthlySubscriptions:[],filter:"",links:[{label:"Subscriptions",icon:"subscriptions",to:"/subscriptions"}],columns:[{name:"createdAt",label:"Effective From",field:"createdAt",sortable:!0,align:"left"},{name:"subscriptionType",label:"Subscriber",field:"subscriptionType",sortable:!0,align:"left"},{name:"months",label:"Months",field:"months",sortable:!0,align:"left"}]}},async created(){this.setTypeFilter(this.selectedSubscriptionRange),this.getFreeTrials()},methods:{setTypeFilter(t){switch(t){case"active":this.typeFilter={expired:!1};break;default:this.typeFilter=!1}},async getFreeTrials(){let[t,e]=await o(this.cysmed.getFreeTrials(this.typeFilter));console.log(t,e),this.monthlySubscriptions=e},onReset(){this.subscriptionType="",this.months=0},async addFreeTrial(){let[t,e]=await o(this.cysmed.addFreeTrial({subscriptionType:this.subscriptionType.toUpperCase(),months:this.months}));t?this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:this.translate(t)}):(this.$q.notify({textColor:"white",type:"positive",message:"Free Trial added."}),this.onReset(),this.addFreeTrialDialog=!1,this.getFreeTrials())}}},b=u,p=(s("b9aa"),s("2877")),d=s("eaac"),m=s("27f9"),y=s("0016"),f=s("6a67"),h=s("9c40"),g=s("0378"),S=s("ddd8"),T=s("eebe"),v=s.n(T),q=Object(p["a"])(b,n,l,!1,null,"3fedcc85",null),F=q.exports;v()(q,"components",{QTable:d["a"],QInput:m["a"],QIcon:y["a"],QBtnToggle:f["a"],QBtn:h["a"],QForm:g["a"],QSelect:S["a"]});var k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-transparent"},[s("q-table",{staticClass:"col bg-transparent",attrs:{title:"Monthly Subscriptions",dense:"",data:t.monthlySubscriptions,columns:t.columns,filter:t.filter,"row-key":"index",flat:""},scopedSlots:t._u([{key:"top",fn:function(){return[s("div",{staticClass:"col-12"},[s("q-btn-toggle",{attrs:{flat:"","toggle-color":"primary",options:[{label:"Active",value:"active"},{label:"All",value:"all"}]},model:{value:t.selectedSubscriptionRange,callback:function(e){t.selectedSubscriptionRange=e},expression:"selectedSubscriptionRange"}}),s("q-btn",{attrs:{flat:""}},[s("q-icon",{attrs:{color:"primary",name:"add_circle",side:""},on:{click:function(e){t.addSubscriptionDialog=!t.addSubscriptionDialog}}})],1),s("q-btn",{attrs:{flat:""}},[s("q-icon",{attrs:{color:"primary",name:"refresh",side:""},on:{click:function(e){return t.getSubscriptions()}}})],1)],1),s("br"),t.addSubscriptionDialog?s("div",{staticClass:"col-12"},[s("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:t.addSubscription,reset:t.onReset}},[s("q-select",{attrs:{options:t.subscriptionTypes,label:"Subscriber","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select Subscriber"}]},model:{value:t.subscriptionType,callback:function(e){t.subscriptionType=e},expression:"subscriptionType"}}),s("q-input",{attrs:{type:"number",label:"Amount",rules:[function(t){return t&&t.length>0||"Please add amount for the subscription"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSubscription(e)}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),s("div",[s("q-btn",{attrs:{label:t.translate("ACTIONS.SUBMIT"),type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:t.translate("ACTIONS.RESET"),type:"reset",color:"primary",flat:""}})],1)],1)],1):t._e()]},proxy:!0}])})],1)},C=[];const{to:x}=s("1712"),w=s("ea76").default;var R={name:"monthlySubscriptions",props:["cysmed"],watch:{selectedSubscriptionRange(t){this.setTypeFilter(t),this.getSubscriptions()}},data(){return{typeFilter:!1,selectedSubscriptionRange:"active",translate:w.translate,addSubscriptionDialog:!1,subscriptionType:"",subscriptionTypes:["Distributor","Wholesaler","Retailer"],amount:0,monthlySubscriptions:[],filter:"",links:[{label:"Subscriptions",icon:"subscriptions",to:"/subscriptions"}],columns:[{name:"createdAt",label:"Effective From",field:"createdAt",sortable:!0,align:"left"},{name:"subscriptionType",label:"Subscriber",field:"subscriptionType",sortable:!0,align:"left"},{name:"monthly",label:"Monthly Subscription",field:"monthly",sortable:!0,align:"left"}]}},async created(){this.setTypeFilter(this.selectedSubscriptionRange),this.getSubscriptions()},methods:{setTypeFilter(t){switch(t){case"active":this.typeFilter={expired:!1};break;default:this.typeFilter=!1}},async getSubscriptions(){let[t,e]=await x(this.cysmed.getMonthlySubscriptions(this.typeFilter));console.log(t,e),this.monthlySubscriptions=e},onReset(){this.subscriptionType="",this.amount=0},async addSubscription(){let[t,e]=await x(this.cysmed.addMonthlySubscription({subscriptionType:this.subscriptionType.toUpperCase(),monthly:this.amount}));t?this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:this.translate(t)}):(this.$q.notify({textColor:"white",type:"positive",message:"Subscription added."}),this.onReset(),this.addSubscriptionDialog=!1,this.getSubscriptions())}}},A=R,Q=(s("e2fb"),Object(p["a"])(A,k,C,!1,null,"48ddec59",null)),_=Q.exports;v()(Q,"components",{QTable:d["a"],QInput:m["a"],QIcon:y["a"],QBtnToggle:f["a"],QBtn:h["a"],QForm:g["a"],QSelect:S["a"]});var E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-table",{staticClass:"col bg-transparent",attrs:{title:"Monthly Subscriptions",dense:"",data:t.currentSubscriptions,columns:t.columns,filter:t.filter,"row-key":"index",flat:""}})],1)},M=[];const{to:D}=s("1712");var I={name:"currentSubscriptions",props:["cysmed"],data(){return{currentSubscriptions:[],filter:"",links:[{label:"Subscriptions",icon:"subscriptions",to:"/subscriptions"}],columns:[{name:"subscriber",label:"Subscriber",field:"subscriber",sortable:!0,align:"left"},{name:"amount",label:"Amount",field:"amount",sortable:!0,align:"left"},{name:"createdAt",label:"Effective From",field:"createdAt",sortable:!0,align:"left"},{name:"expiry",label:"Expiry",field:"expiry",sortable:!0,align:"left"}]}},async created(){this.getSubscriptions()},methods:{async getSubscriptions(){let[t,e]=await D(this.cysmed.getCurrentSubscriptions());if(console.log(t,e),t);else{for(let t in e)e[t].subscriber=e[t].subscriptionType.subscriptionType;this.currentSubscriptions=e}}}},O=I,$=(s("0d03"),Object(p["a"])(O,E,M,!1,null,"0f29869f",null)),P=$.exports;v()($,"components",{QTable:d["a"]});var B={name:"cysmedSubscriptions",components:{breadcrumbs:r["default"],freeTrials:F,monthlySubscriptions:_,currentSubscriptions:P},props:["cysmed"],data(){return{tab:"Current Subscriptions",tabs:["Current Subscriptions","Free Trials","Monthly Subscriptions"],links:[{label:"Subscriptions",icon:"subscriptions",to:"/subscriptions"}],allowlastName:!0}},async created(){let t=(await this.cysmed.whoAmILocally()).authority;this.allowlastName=!t.match(/PHARMACY/)},methods:{}},N=B,j=(s("a7f4"),s("429bb")),U=s("7460"),z=s("adad"),J=s("823b"),W=Object(p["a"])(N,i,a,!1,null,"1e6f9ae3",null);e["default"]=W.exports;v()(W,"components",{QTabs:j["a"],QTab:U["a"],QTabPanels:z["a"],QTabPanel:J["a"]})},"4a7f":function(t,e,s){},a7f4:function(t,e,s){"use strict";s("adad0")},adad0:function(t,e,s){},b1f6:function(t,e,s){},b9aa:function(t,e,s){"use strict";s("b1f6")},e2fb:function(t,e,s){"use strict";s("4a7f")}}]);