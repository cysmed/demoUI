(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"07de":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"bg-secondary text-white text-center"},[a("div",{staticClass:"text-h6"},[t._v("CysmedHub")]),a("q-tabs",{staticClass:"text-white",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"login",icon:"login",label:"Login"}}),a("q-tab",{attrs:{name:"register",icon:"person_add",label:"Register"}})],1)],1),a("q-card-section",{staticClass:"bg-secondary text-white q-pa-none"},[a("q-tab-panels",{staticClass:"bg-secondary q-ma-none full-width q-pa-none",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"login"}},[a("loginForm")],1),a("q-tab-panel",{attrs:{name:"register"}},[a("registrationForm")],1)],1)],1)],1)},i=[],n=a("310f"),o=a("5757"),r={name:"authForms",components:{loginForm:n["a"],registrationForm:o["a"]},props:{},async created(){},data(){return{tab:"login",loggedin:!1,working:!1}},methods:{}},l=r,c=(a("e12e"),a("2877")),d=a("f09f"),m=a("a370"),u=a("429bb"),p=a("7460"),g=a("adad"),h=a("823b"),f=a("eebe"),b=a.n(f),v=Object(c["a"])(l,s,i,!1,null,"64b66aa8",null);e["a"]=v.exports;b()(v,"components",{QCard:d["a"],QCardSection:m["a"],QTabs:u["a"],QTab:p["a"],QTabPanels:g["a"],QTabPanel:h["a"]})},"0924":function(t,e,a){"use strict";a.r(e);const s=a("76cd");e["default"]={home:s}},"2cbd":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-breadcrumbs",[a("q-breadcrumbs-el",{attrs:{icon:"home",to:"/"}}),t._l(t.links,(function(t){return a("q-breadcrumbs-el",{key:t.link,attrs:{label:t.label,icon:t.icon,to:t.to}})}))],2)],1)},i=[],n={name:"breadcrumbs",props:{links:{type:Array}},data(){return{}},methods:{}},o=n,r=a("2877"),l=a("ead5"),c=a("079e"),d=a("eebe"),m=a.n(d),u=Object(r["a"])(o,s,i,!1,null,null,null);e["a"]=u.exports;m()(u,"components",{QBreadcrumbs:l["a"],QBreadcrumbsEl:c["a"]})},"310f":function(t,e,a){"use strict";var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("q-form",{staticClass:"text-white bg-secondary",on:{submit:e.onSubmit,reset:e.onReset}},[s("q-input",{attrs:{filled:"",type:"email",label:"email",hint:"email","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your email address"},function(e){return t.isValidEmail()||"Invalid email address"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("q-input",{attrs:{filled:"",type:"password",label:"Password","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please enter your password"}],"error-message":e.passwordErrorMessage},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("div",{staticClass:"q-pa-md"},[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1)],1)},i=[],n=(a("ddb0"),a("cf57"));const o=a("1712").to,r=a("ff00"),l=a("40cd").default;var c={name:"loginForm",data(){return{email:"",password:"",passwordErrorMessage:""}},methods:{isValidEmail(){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(this.email)||"Invalid email"},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:n["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)},async onSubmit(){l.setSettings({TBURL:r["TB_URL"]});r["TB_URL"];let t={email:this.email,password:this.password};this.working=!0,this.showCustom();let[e,a]=await o(l.login(t));if(this.working=!1,e)return this.loggedin=!1,this.$q.notify({type:"negative",message:e.error||e.message||"failed to log in"}),this.password="",void(this.passwordErrorMessage=e.error||e.message||"wrong email/password");this.$q.notify({type:"positive",message:"log in successful"});l.getDefaultPageAfterLogin("");window.location.assign(l.getDefaultPageAfterLogin())},onReset(){this.email=null,this.password=null}}},d=c,m=a("2877"),u=a("0378"),p=a("27f9"),g=a("9c40"),h=a("eebe"),f=a.n(h),b=Object(m["a"])(d,s,i,!1,null,null,null);e["a"]=b.exports;f()(b,"components",{QForm:u["a"],QInput:p["a"],QBtn:g["a"]})},5757:function(t,e,a){"use strict";var s=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("q-form",{ref:"userRegistrationForm",staticClass:"q-gutter-md text-white",on:{submit:e.createUser,reset:e.onReset}},[s("q-input",{attrs:{filled:"",type:"text",label:"first name","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your name"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),s("q-input",{attrs:{filled:"",type:"text",label:"last name","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your name"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),s("q-select",{attrs:{"use-input":"",filled:"",options:e.genders,label:"Gender","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please select your gender"}]},model:{value:e.gender,callback:function(t){e.gender=t},expression:"gender"}}),s("q-input",{attrs:{filled:"",mask:"date",label:"Date of Birth(YYYY/MM/DD)",rules:["date",function(t){return t&&t.length>0||"Please enter your dob"}]},scopedSlots:e._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}}),s("q-input",{attrs:{filled:"",type:"email",label:"email","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please enter your email address"},function(e){return t.isValidEmail()||"Invalid email address"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e.showAccept?s("terms",{attrs:{accept:e.accept,main:e.main}}):e._e(),e.showActivation?s("div",{staticClass:"col"},[s("q-checkbox",{staticClass:"col",attrs:{label:"Send Activation Email"},model:{value:e.activationEmail,callback:function(t){e.activationEmail=t},expression:"activationEmail"}}),s("q-checkbox",{staticClass:"col",attrs:{label:"Show Activation link"},model:{value:e.showActivationLink,callback:function(t){e.showActivationLink=t},expression:"showActivationLink"}})],1):e._e(),s("div",[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"white",flat:""}})],1),s("activationLink",{attrs:{alert:e.alert,alertUserId:e.alertUserId}})],1)},i=[],n=(a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-toggle",{attrs:{color:"secondary"},on:{input:t.toggled},model:{value:t.localAccept,callback:function(e){t.localAccept=e},expression:"localAccept"}}),t._v("I\n  accept the\n  "),a("a",{staticClass:"text-underline text-italic",staticStyle:{"text-decoration":"underline",cursor:"pointer"},attrs:{clickable:""},on:{click:t.showTerms}},[t._v("terms and conditions")]),a("q-dialog",{attrs:{"transition-show":"rotate","transition-hide":"rotate"},model:{value:t.termsDialog,callback:function(e){t.termsDialog=e},expression:"termsDialog"}},[a("q-card",[a("q-card-section",{staticClass:"q-pt-none"},[""!==t.termsText?a("q-markdown",[t._v("\n          "+t._s(t.termsText)+"\n        ")]):t._e()],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Ok",color:"primary"}})],1)],1)],1)],1)}),o=[],r=a("cf57");a("bc3a"),a("1712").to;const l=a("9fea")();var c={name:"terms",props:{accept:Boolean,main:Function},created(){this.myParent=this.main(),this.localAccept=this.accept},data(){return{localAccept:!1,myParent:null,termsText:"",termsDialog:!1}},methods:{async showTerms(){this.termsDialog=!0,this.termsText=l},toggled(t){this.$nextTick((function(){this.myParent.changeAccept(t)}))},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:r["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)}}},d=c,m=a("2877"),u=a("9564"),p=a("24e8"),g=a("f09f"),h=a("a370"),f=a("4b7e"),b=a("9c40"),v=a("7f67"),y=a("eebe"),w=a.n(y),k=Object(m["a"])(d,n,o,!1,null,null,null),q=k.exports;w()(k,"components",{QToggle:u["a"],QDialog:p["a"],QCard:g["a"],QCardSection:h["a"],QCardActions:f["a"],QBtn:b["a"]}),w()(k,"directives",{ClosePopup:v["a"]});var x=a("7c83");a("bc3a");const C=a("1712").to,_=a("ff00"),A=a("40cd").default;var S={name:"registrationForm",components:{terms:q,activationLink:x["a"]},props:["inside"],async created(){if(A.setSettings({TBURL:_["TB_URL"]}),A.setSettings(_),this.inside)this.showAccept=!1,this.accept=!0,this.showActivation=!0,this.activationEmail=!1,this.showActivationLink=!0;else{let[t,e]=await C(A.isLoggedIn());e&&window.location.assign("#/home")}},data(){return{activationPage:"",accept:!1,showAccept:!0,showActivation:!1,showActivationLink:!1,activationEmail:!0,email:"",firstName:"",lastName:"",gender:"Male",genders:["Male","Female"],dob:"",password:"",cpassword:"",passwordErrorMessage:"",users:[],alert:!1,alertUserId:null}},methods:{changeAccept(t){this.accept=t},submit(){this.$refs.userRegistrationForm.submit()},main(){return this},isValidEmail(){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(this.email)||"Invalid email"},showCustom(t=""){const e=this.$q.dialog({title:t,message:"",progress:{spinner:r["a"],color:"primary"},persistent:!0,ok:!1}),a=setInterval((()=>{!1===this.working&&(clearInterval(a),e.hide())}),500)},async createUser(){return A.setSettings({TBURL:_["TB_URL"]}),new Promise((async(t,e)=>{if(!0!==this.accept)return this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"You need to read and accept the terms and conditions"}),t(!1);this.working=!0,this.showCustom();let[a,s]=await C(A.createUser({email:this.email,firstName:this.firstName,lastName:this.lastName,gender:this.gender,dateOfBirth:this.dob,authority:"SYS_USER"},{activationEmail:this.activationEmail,showActivationLink:this.showActivationLink},!0));if(this.working=!1,a){a=a.msg||a.message||a.error||a;try{a=JSON.parse(a)}catch(i){}if("object"===typeof a){let t=Object.keys(a);a=a[t[0]]}this.$q.notify({type:"negative",message:a}),t(!1)}else console.log(this.showActivationLink),this.showActivationLink?(this.alert=!0,this.alertUserId=s):this.$q.notify({type:"positive",message:"Registration successful. Check your email to activate you account."})}))},onReset(){this.email=null,this.firstName=null,this.lastName=null,this.password=null,this.cpassword=null,this.accept=!1}}},Q=S,P=a("0378"),T=a("27f9"),I=a("ddd8"),L=a("0016"),E=a("7cbe"),N=a("52ee"),R=a("8f8e"),$=Object(m["a"])(Q,s,i,!1,null,null,null);e["a"]=$.exports;w()($,"components",{QForm:P["a"],QInput:T["a"],QSelect:I["a"],QIcon:L["a"],QPopupProxy:E["a"],QDate:N["a"],QBtn:b["a"],QToggle:u["a"],QCheckbox:R["a"],QDialog:p["a"],QCard:g["a"],QCardSection:h["a"]}),w()($,"directives",{ClosePopup:v["a"]})},"6daa":function(t,e,a){"use strict";a.r(e);var s=a("cf57");const i=a("e350").default,n=a("4556");class o extends i{constructor(){super()}async confirm(t,e,a="Confirm"){return new Promise(((s,i)=>{t.$q.dialog({title:a,message:e,cancel:!0,persistent:!0}).onOk((()=>s(!0))).onOk((()=>s(!0))).onCancel((()=>i(!0))).onDismiss((()=>i(!0)))}))}showDialog(t,e="",a="",i=0){let o=n({length:10});const r=t.$q.dialog({title:e,message:a,progress:{spinner:s["a"],color:"primary"},persistent:!0,ok:!1});let l,c,d=i;r.update({message:`${d} secs`});const m=()=>{clearInterval(l),clearInterval(c),r.hide()};return c=setInterval((()=>{i>0?(d--,0===d&&m()):d++,r.update({message:`${d} secs`})}),1e3),this.once(o,m),o}}e["default"]=new o},"6f24":function(t,e,a){},7687:function(t,e,a){t.exports=a.p+"img/cysmedinfo.d33fe8a7.png"},"76cd":function(t){t.exports=JSON.parse('[{"name":"System Tools","icon":"settings","link":"/#/system","description":"Tools for System Administration","children":[{"name":"Users","icon":"settings","link":"/#/system/users","description":"Manage Users","authorities":["SYS_ADMIN","ORG_ADMIN"]},{"name":"Organizations","icon":"corporate_fare","link":"/#/system/organizations","description":"Organizations Management","authorities":["SYS_ADMIN","ORG_ADMIN"]},{"name":"Custom Landing","icon":"house","link":"/#/system/landing_page","description":"Default page after log in","authorities":["SYS_USER","SYS_ADMIN"]},{"name":"Audit Logs","icon":"track_changes","link":"/#/system/audit_logs","description":"Audit logs and logins","authorities":["SYS_USER","SYS_ADMIN"]}]},{"name":"Organizations","icon":"corporate_fare","link":"https://www.gospelsounders.org","description":"Organizations Management"},{"name":"Pharmacy","icon":"medication","link":"https://www.gospelsounders.org","description":"Retail Pharmacy"},{"name":"Distributor","icon":"medication","link":"https://www.gospelsounders.org","description":"Pharmaceutical Distributor"},{"name":"Hospital","icon":"local_hospital","link":"/#/hospital","description":"Hospital Management"},{"name":"Laboratory","icon":"science","link":"/#/laboratory","description":"Laboratory Management"},{"name":"Professional Registrations","icon":"app_registration","link":"/#/professional_registrations","description":"Register as a health professional"},{"name":"Profile Management","icon":"person","link":"/#/profile","description":"Profile"}]')},"7c83":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{"full-width":""},model:{value:t.innerAlert,callback:function(e){t.innerAlert=e},expression:"innerAlert"}},[a("q-card",[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("User activation link")])]),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),a("q-card-section",[t._v("\n      In order to activate user use the following\n      "),a("a",{attrs:{href:t.activationPage}},[t._v("activation link")]),t._v(" :\n    ")]),a("q-card-section",{staticClass:"text-center row flex flex-center"},[a("div",{staticClass:"col text-no-wrap flex flex-center"},[a("code",{staticClass:"bg-grey-4 text-h6 text-bold q-pa-md row text-no-wrap",staticStyle:{"overflow-x":"scroll","overflow-y":"none"}},[t._v(t._s(t.activationPage))]),a("q-btn",{staticClass:"text-primary",attrs:{icon:"content_copy",flat:""},on:{click:t.copyActivationLinkToClipBoard}},[a("q-tooltip",[t._v(" Copy activation link ")])],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"primary"}})],1)],1)],1)},i=[];a("ddb0"),a("cf57");const n=a("1712").to,o=a("ff00"),r=a("40cd").default;var l={name:"activationLink",components:{},props:["inside","alert","alertUserId","main"],async created(){r.setSettings({TBURL:o["TB_URL"]}),r.setSettings(o),this.showAccept=!1,this.accept=!0},data(){return{activationPage:"",accept:!1,showAccept:!0,innerAlert:!1}},watch:{async alert(t,e){this.main.loadingSomething=!0;let[a,s]=await n(r.getActivationCode(this.alertUserId));if(this.main.loadingSomething=!1,a)return void this.$q.notify({type:"negative",message:a||a.response||"Couldn't fetch activation link"});this.innerAlert=!0;let{activationCode:i}=s,o=window.location.protocol+"//"+window.location.host+`/#/activate?activateToken=${i}`;this.activationPage=o}},methods:{copyActivationLinkToClipBoard(){navigator.clipboard.writeText(this.activationPage).then((()=>{this.$q.notify({type:"positive",message:"Activation link copied!"})}),(()=>{}))}}},c=l,d=a("2877"),m=a("24e8"),u=a("f09f"),p=a("a370"),g=a("65c6"),h=a("6ac5"),f=a("9c40"),b=a("05c0"),v=a("4b7e"),y=a("7f67"),w=a("eebe"),k=a.n(w),q=Object(d["a"])(c,s,i,!1,null,null,null);e["a"]=q.exports;k()(q,"components",{QDialog:m["a"],QCard:u["a"],QCardSection:p["a"],QToolbar:g["a"],QToolbarTitle:h["a"],QBtn:f["a"],QTooltip:b["a"],QCardActions:v["a"]}),k()(q,"directives",{ClosePopup:y["a"]})},"9fea":function(t,e){function a(){return"\n## Terms and Conditions\n\n...\n    "}t.exports=a},e12e:function(t,e,a){"use strict";a("6f24")}}]);